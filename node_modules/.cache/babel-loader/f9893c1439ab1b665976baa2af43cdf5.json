{"ast":null,"code":"var _jsxFileName = \"/home/admin/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/ayima/todo-app/src/pages/Main/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport cls from './Main.module.scss';\nimport { useNavigate } from 'react-router-dom';\nimport { getTodos, deleteTodo } from '../../configs/index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Main = () => {\n  _s();\n\n  const navigate = useNavigate();\n\n  const goCreate = () => navigate('/create');\n\n  const [todos, setTodos] = React.useState(null);\n  const [loading, setLoading] = React.useState(false);\n  const [updateUseEffect, setUpdateUseEffect] = React.useState(null);\n\n  const handleDelete = id => {\n    setLoading(true);\n    const askDelete = window.confirm('Вы точно хотите удалить эту карточку?');\n\n    if (askDelete) {\n      deleteTodo(id).then(() => setUpdateUseEffect(id)).catch(console.error).finally(() => setLoading(false));\n    }\n  };\n\n  React.useEffect(() => {\n    getTodos().then(res => {\n      const data = res ? Object.entries(res).map(_ref => {\n        let [id, rest] = _ref;\n        return {\n          id,\n          ...rest\n        };\n      }) : [];\n      setTodos(data);\n    });\n  }, [updateUseEffect]);\n  if (!todos) return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 22\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: cls.root,\n    children: [loading && /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }, this), todos === null || todos === void 0 ? void 0 : todos.map(_ref2 => {\n      let {\n        title,\n        content,\n        id\n      } = _ref2;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cls.card,\n        onClick: () => handleDelete(id),\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this);\n    }), (todos === null || todos === void 0 ? void 0 : todos.length) === 0 && /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: cls.createBtn,\n      onClick: goCreate,\n      children: \"Create Todo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Main, \"+FI5degP8MNyh5Yr7yuzlhGrlKk=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["React","cls","useNavigate","getTodos","deleteTodo","Main","navigate","goCreate","todos","setTodos","useState","loading","setLoading","updateUseEffect","setUpdateUseEffect","handleDelete","id","askDelete","window","confirm","then","catch","console","error","finally","useEffect","res","data","Object","entries","map","rest","root","title","content","card","length","createBtn"],"sources":["/home/admin/Документы/ayima/todo-app/src/pages/Main/index.jsx"],"sourcesContent":["import React from 'react'\nimport cls from './Main.module.scss'\nimport { useNavigate } from 'react-router-dom'\nimport { getTodos, deleteTodo } from '../../configs/index'\n\nconst Main = () => {\n\n  const navigate = useNavigate()\n  const goCreate = () => navigate('/create')\n\n  const [todos, setTodos] = React.useState(null)\n\n  const [loading, setLoading] = React.useState(false)\n\n  const [updateUseEffect, setUpdateUseEffect] = React.useState(null)\n\n  const handleDelete = id => {\n    setLoading(true)\n\n    const askDelete = window.confirm('Вы точно хотите удалить эту карточку?')\n\n    if (askDelete) {\n      deleteTodo(id)\n      .then(() => setUpdateUseEffect(id))\n      .catch(console.error)\n      .finally(() => setLoading(false))\n    }\n  }\n\n\n  React.useEffect(() => {\n    getTodos()\n    .then(res => {\n      const data = res ? Object.entries(res).map(([id, rest]) => {\n        return {\n          id,\n          ...rest\n        }\n      }) : []\n      setTodos(data)\n    })\n  }, [updateUseEffect])\n\n\n  if (!todos) return <h1>Loading...</h1>\n  return (\n    <div className={cls.root}>\n      {\n        loading && (\n          <h1>Загрузка...</h1>\n        )\n      }\n\n      {\n        todos?.map(({title, content, id}) => {\n          return (\n            <div \n              className={cls.card}\n              onClick={() => handleDelete(id)}\n            >\n              <h1>{ title }</h1>\n              <p>{ content }</p>\n            </div>\n          )\n        })\n      }\n\n      {\n        todos?.length === 0 && (\n          <h1>Нет данных</h1>\n        )\n      }\n\n\n      <button\n        className={cls.createBtn}\n        onClick={goCreate}\n      >\n        Create Todo\n      </button>\n    </div>\n  )\n}\n\nexport default Main"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,qBAArC;;;AAEA,MAAMC,IAAI,GAAG,MAAM;EAAA;;EAEjB,MAAMC,QAAQ,GAAGJ,WAAW,EAA5B;;EACA,MAAMK,QAAQ,GAAG,MAAMD,QAAQ,CAAC,SAAD,CAA/B;;EAEA,MAAM,CAACE,KAAD,EAAQC,QAAR,IAAoBT,KAAK,CAACU,QAAN,CAAe,IAAf,CAA1B;EAEA,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBZ,KAAK,CAACU,QAAN,CAAe,KAAf,CAA9B;EAEA,MAAM,CAACG,eAAD,EAAkBC,kBAAlB,IAAwCd,KAAK,CAACU,QAAN,CAAe,IAAf,CAA9C;;EAEA,MAAMK,YAAY,GAAGC,EAAE,IAAI;IACzBJ,UAAU,CAAC,IAAD,CAAV;IAEA,MAAMK,SAAS,GAAGC,MAAM,CAACC,OAAP,CAAe,uCAAf,CAAlB;;IAEA,IAAIF,SAAJ,EAAe;MACbb,UAAU,CAACY,EAAD,CAAV,CACCI,IADD,CACM,MAAMN,kBAAkB,CAACE,EAAD,CAD9B,EAECK,KAFD,CAEOC,OAAO,CAACC,KAFf,EAGCC,OAHD,CAGS,MAAMZ,UAAU,CAAC,KAAD,CAHzB;IAID;EACF,CAXD;;EAcAZ,KAAK,CAACyB,SAAN,CAAgB,MAAM;IACpBtB,QAAQ,GACPiB,IADD,CACMM,GAAG,IAAI;MACX,MAAMC,IAAI,GAAGD,GAAG,GAAGE,MAAM,CAACC,OAAP,CAAeH,GAAf,EAAoBI,GAApB,CAAwB,QAAgB;QAAA,IAAf,CAACd,EAAD,EAAKe,IAAL,CAAe;QACzD,OAAO;UACLf,EADK;UAEL,GAAGe;QAFE,CAAP;MAID,CALkB,CAAH,GAKX,EALL;MAMAtB,QAAQ,CAACkB,IAAD,CAAR;IACD,CATD;EAUD,CAXD,EAWG,CAACd,eAAD,CAXH;EAcA,IAAI,CAACL,KAAL,EAAY,oBAAO;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QAAP;EACZ,oBACE;IAAK,SAAS,EAAEP,GAAG,CAAC+B,IAApB;IAAA,WAEIrB,OAAO,iBACL;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAHN,EAQIH,KARJ,aAQIA,KARJ,uBAQIA,KAAK,CAAEsB,GAAP,CAAW,SAA0B;MAAA,IAAzB;QAACG,KAAD;QAAQC,OAAR;QAAiBlB;MAAjB,CAAyB;MACnC,oBACE;QACE,SAAS,EAAEf,GAAG,CAACkC,IADjB;QAEE,OAAO,EAAE,MAAMpB,YAAY,CAACC,EAAD,CAF7B;QAAA,wBAIE;UAAA,UAAMiB;QAAN;UAAA;UAAA;UAAA;QAAA,QAJF,eAKE;UAAA,UAAKC;QAAL;UAAA;UAAA;UAAA;QAAA,QALF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF;IASD,CAVD,CARJ,EAsBI,CAAA1B,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAE4B,MAAP,MAAkB,CAAlB,iBACE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAvBN,eA4BE;MACE,SAAS,EAAEnC,GAAG,CAACoC,SADjB;MAEE,OAAO,EAAE9B,QAFX;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QA5BF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAqCD,CA7ED;;GAAMF,I;UAEaH,W;;;KAFbG,I;AA+EN,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}